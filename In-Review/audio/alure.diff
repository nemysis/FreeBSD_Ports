Index: Makefile
===================================================================
--- Makefile	(revision 328796)
+++ Makefile	(working copy)
@@ -7,14 +7,13 @@
 CATEGORIES=	audio
 MASTER_SITES=	http://kcat.strangesoft.net/alure-releases/
 
-MAINTAINER=	nemysis@gmx.ch
+MAINTAINER=	nemysis@FreeBSD.org
 COMMENT=	Utility library to help manage common tasks with OpenAL
 
 LICENSE=	MIT
 
-LIB_DEPENDS=	sndfile:${PORTSDIR}/audio/libsndfile
+LIB_DEPENDS=	libsndfile.so:${PORTSDIR}/audio/libsndfile
 
-NO_STAGE=	yes
 USES=		cmake pkgconfig
 USE_OPENAL=	soft
 USE_LDCONFIG=	yes
@@ -24,63 +23,37 @@
 PORTDOCS=	*
 PORTEXAMPLES=	*
 
-OPTIONS_DEFINE=		DOCS EXAMPLES STATIC VORBIS FLAC MPG123 DUMB MODPLUG FLUIDSYNTH
-OPTIONS_DEFAULT=	VORBIS FLAC DUMB
+OPTIONS_DEFINE=		DOCS DUMB EXAMPLES FLAC FLUIDSYNTH MPG123 MODPLUG STATIC VORBIS
+OPTIONS_DEFAULT=	DUMB FLAC VORBIS
 
 DUMB_DESC=		DUMB audio library decoding support
+FLUIDSYNTH_DESC=	MIDI support via FluidSynth
 MODPLUG_DESC=		MOD decoding via ModPlug
-FLUIDSYNTH_DESC=	MIDI support via FluidSynth
 
 OPTIONS_SUB=	yes
 
+DOCS_BUILD_DEPENDS=	NaturalDocs:${PORTSDIR}/devel/naturaldocs
+DUMB_BUILD_DEPENDS=	${LOCALBASE}/include/dumb.h:${PORTSDIR}/audio/dumb-allegro
+DUMB_CMAKE_ON=		-DUSE_DUMB:BOOL=TRUE
+DUMB_CMAKE_OFF=		-DUSE_DUMB:BOOL=FALSE
+FLAC_LIB_DEPENDS=	FLAC:${PORTSDIR}/audio/flac
+FLAC_CMAKE_ON=		-DUSE_FLAC:BOOL=TRUE
+FLAC_CMAKE_OFF=		-DUSE_FLAC:BOOL=FALSE
+FLUIDSYNTH_LIB_DEPENDS=	fluidsynth:${PORTSDIR}/audio/fluidsynth
+FLUIDSYNTH_CMAKE_ON=	-DUSE_FLUIDSYNTH:BOOL=TRUE
+FLUIDSYNTH_CMAKE_OFF=	-DUSE_FLUIDSYNTH:BOOL=FALSE
+MPG123_LIB_DEPENDS=	mpg123:${PORTSDIR}/audio/mpg123
+MPG123_CMAKE_ON=	-DUSE_MPG123:BOOL=TRUE
+MPG123_CMAKE_OFF=	-DUSE_MPG123:BOOL=FALSE
+MODPLUG_BUILD_DEPENDS=	${LOCALBASE}/include/libmodplug/modplug.h:${PORTSDIR}/audio/libmodplug
+MODPLUG_CMAKE_ON=	-DUSE_MODPLUG:BOOL=TRUE
+MODPLUG_CMAKE_OFF=	-DUSE_MODPLUG:BOOL=FALSE
+VORBIS_LIB_DEPENDS=	vorbis:${PORTSDIR}/audio/libvorbis
+VORBIS_CMAKE_ON=	-DUSE_VORBIS:BOOL=TRUE
+VORBIS_CMAKE_OFF=	-DUSE_VORBIS:BOOL=TRUE
+
 .include <bsd.port.options.mk>
 
-.if ${PORT_OPTIONS:MVORBIS}
-LIB_DEPENDS+=	vorbis:${PORTSDIR}/audio/libvorbis
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_VORBIS:BOOL=TRUE
-.else
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_VORBIS:BOOL=FALSE
-.endif
-
-.if ${PORT_OPTIONS:MFLAC}
-LIB_DEPENDS+=	FLAC:${PORTSDIR}/audio/flac
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_FLAC:BOOL=TRUE
-.else
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_FLAC:BOOL=FALSE
-.endif
-
-.if ${PORT_OPTIONS:MMPG123}
-LIB_DEPENDS+=	mpg123:${PORTSDIR}/audio/mpg123
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_MPG123:BOOL=TRUE
-.else
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_MPG123:BOOL=FALSE
-.endif
-
-.if ${PORT_OPTIONS:MDUMB}
-BUILD_DEPENDS+=	${LOCALBASE}/include/dumb.h:${PORTSDIR}/audio/dumb-allegro
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_DUMB:BOOL=TRUE
-.else
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_DUMB:BOOL=FALSE
-.endif
-
-.if ${PORT_OPTIONS:MMODPLUG}
-BUILD_DEPENDS+=	${LOCALBASE}/include/libmodplug/modplug.h:${PORTSDIR}/audio/libmodplug
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_MODPLUG:BOOL=TRUE
-.else
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_MODPLUG:BOOL=FALSE
-.endif
-
-.if ${PORT_OPTIONS:MFLUIDSYNTH}
-LIB_DEPENDS+=	fluidsynth:${PORTSDIR}/audio/fluidsynth
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_FLUIDSYNTH:BOOL=TRUE
-.else
-PLUGIN_OPTIONS_CMAKE+=	-DUSE_FLUIDSYNTH:BOOL=FALSE
-.endif
-
-.if ${PORT_OPTIONS:MDOCS}
-BUILD_DEPENDS+=	NaturalDocs:${PORTSDIR}/devel/naturaldocs
-.endif
-
 post-patch:
 	@${REINPLACE_CMD} -e 's|lib$${LIB_SUFFIX}/pkgconfig|$${CMAKE_INSTALL_PREFIX}/libdata/pkgconfig|' \
 		-e 's|"ModPlug support (for IT/XM/S3M/MOD)" OFF)|"ModPlug support (for IT/XM/S3M/MOD)" ON)|' \
@@ -103,9 +76,7 @@
 .endif
 
 post-install:
-.if ${PORT_OPTIONS:MEXAMPLES}
-	@${MKDIR} ${EXAMPLESDIR}
-	@(cd ${WRKSRC}/examples && ${COPYTREE_SHARE} . ${EXAMPLESDIR})
-.endif
+	@${MKDIR} ${STAGEDIR}${EXAMPLESDIR}
+	@(cd ${WRKSRC}/examples && ${COPYTREE_SHARE} . ${STAGEDIR}${EXAMPLESDIR})
 
 .include <bsd.port.mk>
