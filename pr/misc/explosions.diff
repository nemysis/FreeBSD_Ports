===> Generating patch
===> Viewing diff with more
diff -ruN --exclude=CVS /usr/ports/misc/explosions/Makefile ./Makefile
--- /usr/ports/misc/explosions/Makefile	2013-01-14 17:56:51.000000000 +0100
+++ ./Makefile	2013-02-23 20:23:35.000000000 +0100
@@ -7,34 +7,59 @@
 
 PORTNAME=	explosions
 PORTVERSION=	0.2005.07.31
-PORTREVISION=	12
-CATEGORIES=	misc
-MASTER_SITES=	ftp://ftp.billsgames.com/unix/x/explosions/
-DISTNAME=	${PORTNAME}-${PORTVERSION:S/^0.//}
+PORTREVISION=	13
+CATEGORIES=	misc games graphics
+MASTER_SITES=	ftp://ftp.tuxpaint.org/unix/x/explosions/ \
+		ftp://ftp.billsgames.com/unix/x/explosions/ \
+		SF/nemysisfreebsdp/:icons
+DISTFILES=	${PORTNAME}-${DISTVERSION:S/^0.//}${EXTRACT_SUFX} \
+		${PORTNAME}.png:icons
+DIST_SUBDIR=	${PORTNAME}
+EXTRACT_ONLY=	${PORTNAME}-${DISTVERSION:S/^0.//}${EXTRACT_SUFX}
 
-MAINTAINER=	ports@FreeBSD.org
+MAINTAINER=	nemysis@gmx.ch
 COMMENT=	3D objects flying around resembling explosions with various effects
 
+LICENSE=	GPLv2
+
+WRKSRC=		${WRKDIR}/${PORTNAME}-${PORTVERSION:S/^0.//}
+
 USE_SDL=	sdl image
 USE_GMAKE=	yes
-USE_PERL5_BUILD=yes
+
+PORTDOCS=	BUGS.txt CHANGES.txt README.txt
+
+OPTIONS_DEFINE=	DOCS
+
+DESKTOP_ENTRIES="Explosions" "${COMMENT}" \
+		"${PREFIX}/share/pixmaps/${PORTNAME}.png" \
+		"${PORTNAME}" "Application;Game;Graphics;" false
+
+.include <bsd.port.options.mk>
+
+.if ${PORT_OPTIONS:MDOCS}
+PLIST_SUB+=	PORTDOCS=""
+.else
+PLIST_SUB+=	PORTDOCS="@comment "
+.endif
 
 post-patch:
-	@${PERL} -pi -e 's!CFLAGS=-Wall -O2!CFLAGS+=-Wall!; \
-		s!sdl-config!${SDL_CONFIG}!' \
+	@${REINPLACE_CMD} \
+	-e 's|CFLAGS=-Wall -O2|CFLAGS=-Wall|' \
+	-e 's|sdl-config|${SDL_CONFIG}|g' \
 		${WRKSRC}/Makefile
-	@${PERL} -pi -e 's!spark%d.png!${DATADIR}/spark%d.png!' \
+	@${REINPLACE_CMD} -e 's|spark%d.png|${DATADIR}/spark%d.png|' \
 		${WRKSRC}/explosions.c
 
 do-install:
-	${INSTALL_PROGRAM} ${WRKSRC}/explosions ${PREFIX}/bin
-	@${MKDIR} ${DATADIR}
-	${INSTALL_DATA} ${WRKSRC}/spark?.png ${DATADIR}
-.if !defined(NOPORTDOCS)
-	@${MKDIR} ${DOCSDIR}
-.for file in BUGS.txt CHANGES.txt README.txt
-	${INSTALL_DATA} ${WRKSRC}/${file} ${DOCSDIR}
-.endfor
+	${INSTALL_PROGRAM} ${WRKSRC}/${PORTNAME} ${PREFIX}/bin/
+	${MKDIR} ${DATADIR}
+	${INSTALL_DATA} ${WRKSRC}/*.png ${DATADIR}
+	${INSTALL_DATA} ${_DISTDIR}/${PORTNAME}.png ${PREFIX}/share/pixmaps/
+
+.if ${PORT_OPTIONS:MDOCS}
+	${MKDIR} ${DOCSDIR}
+	${INSTALL_DATA} ${PORTDOCS:S|^|${WRKSRC}/|} ${DOCSDIR}
 .endif
 
 .include <bsd.port.mk>
diff -ruN --exclude=CVS /usr/ports/misc/explosions/distinfo ./distinfo
--- /usr/ports/misc/explosions/distinfo	2013-01-14 17:56:51.000000000 +0100
+++ ./distinfo	2013-02-23 20:05:26.000000000 +0100
@@ -1,2 +1,4 @@
-SHA256 (explosions-2005.07.31.tar.gz) = 8203ed455caee9c0ad0e75b31462bb7c7a9c2860079deb7671c914d5cde37ae8
-SIZE (explosions-2005.07.31.tar.gz) = 40219
+SHA256 (explosions/explosions-2005.07.31.tar.gz) = 8203ed455caee9c0ad0e75b31462bb7c7a9c2860079deb7671c914d5cde37ae8
+SIZE (explosions/explosions-2005.07.31.tar.gz) = 40219
+SHA256 (explosions/explosions.png) = 3f5c330d41b5bf46598a00f8d75ebbe2bfa08bbbb9a649f0e96833331d727a87
+SIZE (explosions/explosions.png) = 1740
diff -ruN --exclude=CVS /usr/ports/misc/explosions/pkg-descr ./pkg-descr
--- /usr/ports/misc/explosions/pkg-descr	2013-01-14 17:56:51.000000000 +0100
+++ ./pkg-descr	2012-12-03 01:13:32.000000000 +0100
@@ -1,9 +1,8 @@
-This is a simplified 3D world with alpha-blended objects that look
-kind of like fireworks or sparks. It also has a number of effects
-built in, such as fading, blurring, fire ("heat"), and zooming.
+Explosions is a simplified 3D world with alpha-blended objects that look
+kind of like fireworks or sparks. It also has a number of effects built in,
+such as fading, blurring, fire ("heat"), and zooming.
 
 It serves no purpose except to look pretty. The source-code is also
-well-documented, so someone might find it useful in learning SDL
-routines.
-
+well-documented, so someone might find it useful in learning SDL routines.
+ 
 WWW: http://www.newbreedsoftware.com/lab/explosions/
diff -ruN --exclude=CVS /usr/ports/misc/explosions/pkg-plist ./pkg-plist
--- /usr/ports/misc/explosions/pkg-plist	2013-01-14 17:56:51.000000000 +0100
+++ ./pkg-plist	2013-02-23 20:06:45.000000000 +0100
@@ -9,5 +9,6 @@
 %%DATADIR%%/spark5.png
 %%DATADIR%%/spark6.png
 %%DATADIR%%/spark7.png
+share/pixmaps/explosions.png
 @dirrm %%DATADIR%%
 %%PORTDOCS%%@dirrm %%DOCSDIR%%
===> Done
