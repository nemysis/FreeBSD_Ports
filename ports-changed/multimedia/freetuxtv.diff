===> Generating patch
===> Viewing diff with more
diff -ruN --exclude=CVS /usr/ports/multimedia/freetuxtv/Makefile ./Makefile
--- /usr/ports/multimedia/freetuxtv/Makefile	2013-05-26 10:39:46.000000000 +0200
+++ ./Makefile	2013-05-27 13:28:19.000000000 +0200
@@ -1,3 +1,4 @@
+# Created by: nemysis <nemysis@gmx.ch>
 # $FreeBSD: head/multimedia/freetuxtv/Makefile 319055 2013-05-25 14:37:02Z zeising $
 
 PORTNAME=	freetuxtv
@@ -11,6 +12,7 @@
 
 LICENSE=	GPLv3
 
+BUILD_DEPENDS=	p5-XML-Parser>=0:${PORTSDIR}/textproc/p5-XML-Parser
 LIB_DEPENDS=	vlc:${PORTSDIR}/multimedia/vlc \
 		dbus-glib:${PORTSDIR}/devel/dbus-glib \
 		sqlite3:${PORTSDIR}/databases/sqlite3 \
@@ -24,15 +26,18 @@
 		expat:${PORTSDIR}/textproc/expat2 \
 		fontconfig:${PORTSDIR}/x11-fonts/fontconfig
 
+USES=		iconv pkgconfig
 USE_GNOME=	glib20 gtk20
 USE_XORG=	pixman x11 xau xcb xcomposite xcursor xdamage xdmcp xext xfixes \
 		xi xinerama xrandr xrender
 GNU_CONFIGURE=	yes
+CONFIGURE_ARGS+=--with-gtk=2.0
 USE_GMAKE=	yes
-USES=		pkgconfig iconv
 INSTALLS_ICONS=	yes
 
-CONFIGURE_ARGS+=--with-gtk=2.0
+PORTDOCS=	AUTHORS ChangeLog README
+
+OPTIONS_DEFINE=	NLS
 
 .include <bsd.port.options.mk>
 
@@ -44,7 +49,18 @@
 PLIST_SUB+=	NLS="@comment "
 .endif
 
+post-patch:
+	@${REINPLACE_CMD} -e 's|$${pkgdatadir}/doc|$${PREFIX}/share/doc/${PORTNAME}|' \
+		-e 's|install-data-am: install-freetuxtvdocDATA|install-data-am: |' \
+		${WRKSRC}/Makefile.in
+	@${REINPLACE_CMD} -e 's|$$(prefix)/$$(DATADIRNAME)/locale|$$(prefix)/share/locale|' \
+		${WRKSRC}/po/Makefile.in.in
+
 post-install:
-	${LN} -sf ${PREFIX}/share/icons/hicolor/48x48/apps/${PORTNAME}.png ${PREFIX}/share/pixmaps/
+.if ${PORT_OPTIONS:MDOCS}
+	@${MKDIR} ${DOCSDIR}
+	${INSTALL_DATA} ${PORTDOCS:S|^|${WRKSRC}/|} ${DOCSDIR}
+.endif
+	${LN} -sf ${PREFIX}/share/icons/hicolor/48x48/apps/${PORTNAME}.png ${PREFIX}/share/pixmaps
 
 .include <bsd.port.mk>
diff -ruN --exclude=CVS /usr/ports/multimedia/freetuxtv/files/patch-po-Makefile.in.in ./files/patch-po-Makefile.in.in
--- /usr/ports/multimedia/freetuxtv/files/patch-po-Makefile.in.in	2013-01-14 17:54:54.000000000 +0100
+++ ./files/patch-po-Makefile.in.in	1970-01-01 01:00:00.000000000 +0100
@@ -1,11 +0,0 @@
---- po/Makefile.in.in.orig	2012-05-08 19:34:01.000000000 +0200
-+++ po/Makefile.in.in	2012-09-22 10:34:08.000000000 +0200
-@@ -34,7 +34,7 @@
- datarootdir = @datarootdir@
- libdir = @libdir@
- DATADIRNAME = @DATADIRNAME@
--itlocaledir = $(prefix)/$(DATADIRNAME)/locale
-+itlocaledir = $(datarootdir)/locale
- subdir = po
- install_sh = @install_sh@
- # Automake >= 1.8 provides @mkdir_p@.
diff -ruN --exclude=CVS /usr/ports/multimedia/freetuxtv/pkg-plist ./pkg-plist
--- /usr/ports/multimedia/freetuxtv/pkg-plist	2013-01-14 17:54:54.000000000 +0100
+++ ./pkg-plist	2013-05-24 13:12:28.000000000 +0200
@@ -10,12 +10,6 @@
 lib/libvlc-gtk.la
 share/applications/freetuxtv.desktop
 %%DATADIR%%/channels_groups.xml
-%%DATADIR%%/doc/AUTHORS
-%%DATADIR%%/doc/COPYING
-%%DATADIR%%/doc/ChangeLog
-%%DATADIR%%/doc/INSTALL
-%%DATADIR%%/doc/NEWS
-%%DATADIR%%/doc/README
 %%DATADIR%%/images/channels/100pourcentradio.png
 %%DATADIR%%/images/channels/1onairconnect.png
 %%DATADIR%%/images/channels/2mmaroc.png
@@ -440,22 +434,9 @@
 %%NLS%%share/locale/zh_CN/LC_MESSAGES/freetuxtv.mo
 %%NLS%%share/locale/zh_TW/LC_MESSAGES/freetuxtv.mo
 share/pixmaps/freetuxtv.png
-@dirrmtry share/icons/hicolor/scalable/apps
-@dirrmtry share/icons/hicolor/scalable
-@dirrmtry share/icons/hicolor/48x48/apps
-@dirrmtry share/icons/hicolor/48x48
-@dirrmtry share/icons/hicolor/32x32/apps
-@dirrmtry share/icons/hicolor/32x32
-@dirrmtry share/icons/hicolor/22x22/apps
-@dirrmtry share/icons/hicolor/22x22
-@dirrmtry share/icons/hicolor/16x16/apps
-@dirrmtry share/icons/hicolor/16x16
-@dirrmtry share/icons/hicolor
-@dirrmtry share/icons
 @dirrm %%DATADIR%%/ui
 @dirrm %%DATADIR%%/images/channels
 @dirrm %%DATADIR%%/images
-@dirrm %%DATADIR%%/doc
 @dirrm %%DATADIR%%
 @dirrmtry share/applications
 @dirrmtry include/libvlc-gtk
===> Done
